$(function(){function a(){h.fadeOut(function(){j.fadeIn()})}function b(){h.fadeOut(function(){i.fadeIn()})}function c(a,b){console.log("totalPrice "+a+", consumedPrice "+b);var c=!1,d=e.val(),g=f.val();if(d||(console.log("Validation error 1"),c=!0,e.parent().addClass("has-error")),d&&a){d>a-b&&(console.log("Validation error 2"),c=!0,e.parent().addClass("has-error"))}return g||(console.log("Validation error 3"),c=!0,f.parent().addClass("has-error")),c}function d(){$(".jumbotron").fadeTo("slow",.3,function(){$(this).hasClass("bg-seychelles")?($(this).removeClass("bg-seychelles"),$(this).addClass("bg-japan-lantern")):($(this).removeClass("bg-japan-lantern"),$(this).addClass("bg-seychelles"))}).fadeTo("slow",1)}var e=$("#contribute"),f=$("#sender"),g=$("#message-text"),h=$(".step-1"),i=$(".step-2"),j=$(".step-error"),k=$("#gift-modal"),l=$("#gift-modal-button");k.on("show.bs.modal",function(a){var b=$(a.relatedTarget),c=b.data("title");$(this).find(".modal-title").text(c);var d=b.data("total-price");if(e.attr("min",0),d){var g=b.data("consumed-price"),k=d-g;e.attr("placeholder","Massimo "+k+" â‚¬"),e.attr("max",k),l.data("consumed-price",g),l.data("total-price",d)}else e.removeAttr("placeholder"),e.removeAttr("max"),l.removeData("consumed-price",null),l.removeData("total-price","");h.fadeIn(),i.fadeOut(),j.fadeOut(),e.val(""),f.val(""),e.parent().removeClass("has-error"),f.parent().removeClass("has-error");var m=b.data("id-gift");l.data("id-gift",m)}),k.on("hide.bs.modal",function(){i.is(":visible")&&window.location.reload()}),l.on("click tap",function(){$(this).attr("disabled","disabled");var d=$(this).data("total-price"),h=$(this).data("consumed-price");if(e.parent().removeClass("has-error"),f.parent().removeClass("has-error"),c(d,h))$(this).removeAttr("disabled");else{var i={idGift:$(this).data("id-gift"),msg:g.val(),sender:f.val(),amount:e.val()};RestModule.saveGiftMsg(i,b,a)}}),setInterval(function(){d()},5e3),$("[type='number']").keypress(function(a){(a.which<48||a.which>57)&&a.preventDefault()})});